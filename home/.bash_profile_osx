# ~/.bash_profile_osx
#
# Author Augusto Pascutti <augusto.hp@gmail.com>
# Part of http://github.com/augustohp/warwick

echo "OSX specifics ...";

# Bash aliases
alias ls="ls -G"

# Homebrew bash-completion support
BASH_COMPLETION_SOURCE=$(brew --prefix)/etc/bash_completion
if [ -f $BASH_COMPLETION_SOURCE ]; then
    echo "Bash completion enabled.";
    . $BASH_COMPLETION_SOURCE
fi

# Prefer Homebrew binaries
export PATH="/usr/local/sbin:/usr/local/bin:$PATH"

# Fixes `pbcopy` on `tmux` for macosSierra
# https://github.com/tmux/tmux/issues/543#issuecomment-248980734
TMUX=$(which tmux)
HOMEBREW=$(which brew)
if [ ! -z "$TMUX" -a ! -z "$HOMEBREW" ]
then
	required_formula=reattach-to-user-namespace
	NEEDS_FIXING=$($HOMEBREW ls | grep $required_formula)
	if [ -z "$NEEDS_FIXING" ]
	then
		echo "Installing fix to pbcopy on tmux..."
		$HOMEBREW install $required_formula
	fi
fi
